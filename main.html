<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies !!</title>
</head>

<body>
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }

        .bg-custom-primary {
            background-color: #331832;
            color: white;
        }


        .bg-custom-secondary {
            background-color: #D81E58;
        }

        .smol-text {
            font-size: 0.9rem;
        }

        .bg-custom-analogous {
            background-color: #3066BE;
            color: white;
        }

        .bg-custom-analogous:hover {
            background-color: #3b77d8;
            color: white;
        }
    </style>
    <div class="container-fluid bg-custom-primary">
        <h1 class="text-center py-4 text-light">Movies</h1>
        <div class="row pb-5 justify-content-center mx-3" id="card-container"></div>
    </div>

    <script>
        const Http = new XMLHttpRequest();

        const API_KEY = '604e8441982751c7133aca4d2e0e8415';
        const BASE_URL = `https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}&language=en-US&page=1`;

        Http.open("GET", BASE_URL);
        Http.send();

        Http.onreadystatechange = (e) => {
            const res = JSON.parse(Http.responseText);
        
            const cardContainer = document.getElementById("card-container");
            cardContainer.innerHTML = res.results.map((item) => {
                const movieID = item.id;
                const backdropPath = item.poster_path;
                return (
                    `<div class="card m-2 pb-3 bg-custom-secondary" style="width: 15rem;">
                        
                    <img src="https://image.tmdb.org/t/p/w500/${backdropPath}" class="card-img-top py-2" alt="...">
                    <div class="card-body">
                        <div class="card-title h4">${item.original_title}</div>
                        <p class="card-text smol-text">${item.overview}</p>
                    </div>
                    <button onclick="openModal(${movieID})" class="smol-text btn bg-custom-analogous">Go somewhere</button>
                </div>
                `)
            })

        }

        const openModal = (movieId) =>{
            console.log("YEH HAI MOVIE ID " + movieId)
            const cardContainer = document.getElementById("card-container");
            
        }

        // await fetch()

        // let imgArr = [];
        // for (i = 0; i < 10; i++) {
        //     if(i%2==0)
        //     imgArr.push("https://m.media-amazon.com/images/M/MV5BMjMxNjY2MDU1OV5BMl5BanBnXkFtZTgwNzY1MTUwNTM@._V1_.jpg");
        //     else
        //     imgArr.push("https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/d1pklzbuyaab0la-1552597012.jpg")
        // }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous">
    </script>
</body>

</html>